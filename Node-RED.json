[{"id":"eb32bbc4.0b04f8","type":"tab","label":"DB v2","disabled":false,"info":""},{"id":"1873c187.45a9ae","type":"cloudant out","z":"eb32bbc4.0b04f8","name":"create","cloudant":"231e03d6.b9953c","database":"mib","service":"Cloudant-fm-17984","payonly":true,"operation":"insert","x":830,"y":360,"wires":[]},{"id":"b225c1ef.665b4","type":"http in","z":"eb32bbc4.0b04f8","name":"","url":"/api/v2/cat/:cat","method":"get","upload":false,"swaggerDoc":"","x":150,"y":120,"wires":[["107777a6.7a5e18","3c1350a1.c6518"]]},{"id":"c1c4b8d7.6416b8","type":"http response","z":"eb32bbc4.0b04f8","name":"","statusCode":"200","headers":{},"x":840,"y":300,"wires":[]},{"id":"376c4e2.2b916b2","type":"http response","z":"eb32bbc4.0b04f8","name":"","statusCode":"","headers":{},"x":850,"y":120,"wires":[]},{"id":"107777a6.7a5e18","type":"cloudant in","z":"eb32bbc4.0b04f8","name":"","cloudant":"","database":"mib","service":"Cloudant-fm-17984","search":"_all_","design":"","index":"","x":450,"y":120,"wires":[["1b0855c5.cd24ca","9b91247c.910dd8"]]},{"id":"896b77ea.9dfda8","type":"function","z":"eb32bbc4.0b04f8","name":"copy query to payload","func":"msg.payload = {};\nmsg.payload = msg.req.query;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":300,"wires":[["c1c4b8d7.6416b8","1873c187.45a9ae"]]},{"id":"894244d8.c45468","type":"cloudant out","z":"eb32bbc4.0b04f8","name":"update doc","cloudant":"c4967cca.e036f","database":"mib","service":"Cloudant-fm-17984","payonly":true,"operation":"insert","x":690,"y":480,"wires":[]},{"id":"bedd857e.2a8f68","type":"cloudant out","z":"eb32bbc4.0b04f8","name":"delete doc","cloudant":"c4967cca.e036f","database":"mib","service":"Cloudant-fm-17984","payonly":false,"operation":"delete","x":650,"y":560,"wires":[]},{"id":"6ff986b1.5cc058","type":"http in","z":"eb32bbc4.0b04f8","name":"","url":"/api/v1/crudtest","method":"get","upload":false,"swaggerDoc":"","x":170,"y":720,"wires":[["a0c614d.9f171e8"]]},{"id":"c3a12025.46f5a","type":"http response","z":"eb32bbc4.0b04f8","name":"","statusCode":"","headers":{},"x":650,"y":720,"wires":[]},{"id":"a0c614d.9f171e8","type":"function","z":"eb32bbc4.0b04f8","name":"get id","func":"msg.payload = {};\nmsg.payload = msg.req.query.id;\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":720,"wires":[["e7fd1c5c.b876a"]]},{"id":"e7fd1c5c.b876a","type":"cloudant in","z":"eb32bbc4.0b04f8","name":"","cloudant":"","database":"mib","service":"Cloudant-fm-17984","search":"_id_","design":"","index":"","x":510,"y":720,"wires":[["c3a12025.46f5a"]]},{"id":"fc8bb422.f8f428","type":"http in","z":"eb32bbc4.0b04f8","name":"","url":"/api/v1/crudtest","method":"delete","upload":false,"swaggerDoc":"","x":180,"y":620,"wires":[["e9a2abe5.be7988"]]},{"id":"e9a2abe5.be7988","type":"function","z":"eb32bbc4.0b04f8","name":"copy query to payload","func":"msg.payload = {};\nmsg.payload = msg.req.query;\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":620,"wires":[["bedd857e.2a8f68","de466b97.00b788"]]},{"id":"de466b97.00b788","type":"http response","z":"eb32bbc4.0b04f8","name":"","statusCode":"200","headers":{},"x":660,"y":620,"wires":[]},{"id":"f4ee0b86.20b258","type":"http in","z":"eb32bbc4.0b04f8","name":"","url":"/api/v1/crudtest","method":"put","upload":false,"swaggerDoc":"","x":160,"y":440,"wires":[["709f04b4.fe448c"]]},{"id":"709f04b4.fe448c","type":"function","z":"eb32bbc4.0b04f8","name":"copy query to payload","func":"msg.payload = {};\nmsg.payload = msg.req.query;\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":440,"wires":[["894244d8.c45468","659649c4.687358"]]},{"id":"659649c4.687358","type":"http response","z":"eb32bbc4.0b04f8","name":"","statusCode":"200","headers":{},"x":680,"y":440,"wires":[]},{"id":"bc9f0153.6fee7","type":"comment","z":"eb32bbc4.0b04f8","name":"Create database entry","info":"","x":160,"y":260,"wires":[]},{"id":"8d4448a9.0d94d8","type":"comment","z":"eb32bbc4.0b04f8","name":"Update database entry","info":"","x":160,"y":400,"wires":[]},{"id":"9d4d7f59.8f0f5","type":"comment","z":"eb32bbc4.0b04f8","name":"Delete Entry","info":"","x":150,"y":580,"wires":[]},{"id":"3c37a659.40fb6a","type":"comment","z":"eb32bbc4.0b04f8","name":"Get entry","info":"","x":140,"y":680,"wires":[]},{"id":"8d48e658.d796e8","type":"comment","z":"eb32bbc4.0b04f8","name":"Get All entries","info":"","x":130,"y":80,"wires":[]},{"id":"9b91247c.910dd8","type":"function","z":"eb32bbc4.0b04f8","name":"","func":"cat = msg.req.params.cat; // rows to select\npayload=[];\nfor (i=0; i<msg.payload.length; i++) {\n    if (typeof(msg.payload[i].cat) != \"undefined\") {\n        if (msg.payload[i].cat == cat) {\n            payload.push(msg.payload[i]);\n        }\n    }\n}\nmsg.payload = payload;\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":120,"wires":[["376c4e2.2b916b2","d6c3a975.2d3c78"]]},{"id":"3c1350a1.c6518","type":"debug","z":"eb32bbc4.0b04f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":400,"y":60,"wires":[]},{"id":"1b0855c5.cd24ca","type":"debug","z":"eb32bbc4.0b04f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":650,"y":60,"wires":[]},{"id":"d6c3a975.2d3c78","type":"debug","z":"eb32bbc4.0b04f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":60,"wires":[]},{"id":"2cfebb8.1b8dd44","type":"debug","z":"eb32bbc4.0b04f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":580,"y":240,"wires":[]},{"id":"90443621.f1bb88","type":"http in","z":"eb32bbc4.0b04f8","name":"","url":"/api/v2/data/:data","method":"post","upload":false,"swaggerDoc":"","x":170,"y":300,"wires":[["1a477500.4393fb","c1c4b8d7.6416b8","4abba178.d9c95"]]},{"id":"1a477500.4393fb","type":"debug","z":"eb32bbc4.0b04f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":360,"wires":[]},{"id":"2bfa711e.03838e","type":"http in","z":"eb32bbc4.0b04f8","name":"","url":"/api/v2/cat/:cat","method":"post","upload":false,"swaggerDoc":"","x":180,"y":200,"wires":[[]]},{"id":"4abba178.d9c95","type":"function","z":"eb32bbc4.0b04f8","name":"","func":"msg.payload = msg.req.params\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":260,"wires":[["699371a4.7b842"]]},{"id":"699371a4.7b842","type":"json","z":"eb32bbc4.0b04f8","name":"","property":"payload","action":"","pretty":false,"x":500,"y":200,"wires":[["2cfebb8.1b8dd44"]]},{"id":"231e03d6.b9953c","type":"cloudant","z":"","host":"myaccountname.cloudant.com","name":"My Cloudant account"},{"id":"c4967cca.e036f","type":"cloudant","z":"","host":"myaccountname.cloudant.com","name":"My Cloudant account"}]
